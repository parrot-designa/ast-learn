Vue2编译原理



# 一、Vue项目开发模式

Vue除了runtime-only模式外，还有runtime-compiler模式。

## 1.1 Runtime-Only模式

平时我们开发项目基本都采用这种模式。在这种模式下，Vue在构建时将模板预先编译成渲染函数，因此最终的打包产物不包含模板编译器。这意味着在运行时，Vue实例需要接收一个已经预编译好的渲染函数，通常这个过程在使用如webpack + vue-loader时自动完成。由于不需要包含编译器，此模式生成的代码体积更小，加载更快。

## 1.2 Runtime+Compiler模式

与Runtime-Only相比，runtime+compiler 模式包含了模板编译器，它允许Vue在运行时动态地编译模板。这意味着你可以在客户端即刻读取与编译模板字符串，这对于一些特定的应用场景（比如使用Vue来动态渲染用户输入的模板）非常有用。但这种方式会导致最终打包的文件体积更大，因为包含了编译器的代码。

在Vue 2中，这两个模式的选择通常是通过如何引入Vue库以及构建配置来区分的。而在Vue 3中，默认推荐使用runtime-only模式，并且鼓励开发者使用.vue单文件组件，其中的模板会在构建时被预编译。如果需要在Vue 3中使用类似runtime+compiler的功能，可能需要额外配置或寻找替代方案，因为Vue 3的核心库默认不再包含完整的编译器。